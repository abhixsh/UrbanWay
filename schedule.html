<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--=============== Favicon ===============-->
        <link rel="shortcut icon" href="assets/img/favicon.png" type="image/png">

        <!--=============== Boxicons ===============-->
        <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>

        <!--=============== CSS ===============-->
        <link rel="stylesheet" href="assets/css/schedules.css">

        <title>Schedules</title>
    </head>
    <body>
        <header class="header" id="header">
            <nav class="nav container">
                <a href="index.html"><img src="assets/img/logo1.png" class="logo"></a>

                <div class="nav__menu" id="nav-menu">
                    <ul class="nav__list">
                        <li class="nav__item">
                            <a href="index.html" class="nav__link">Home</a>
                        </li>
                        <li class="nav__item">
                            <a href="schedule.html" class="nav__link   active-link">Schedules</a>
                        </li>
                        <li class="nav__item">
                            <a href="About Us.html" class="nav__link">About Us</a>
                        </li>
                    </ul>

                    <i class='bx bx-x nav__close' id="nav-close"></i>

                </div>

                <div class="action">
                    <div class="profile" onclick="menuToggle();">
                        <img src="assets/img/user2.png" alt="user">
                    </div>
                    <div class="menu">
                        <h3 id="name" class="usersname"> </h3>
                        <h5 id="user" class="usersmail"> </h5>
                        <ul>
                            <li> <i class='bx bx-user-circle' class="usermenu_item"></i>&nbsp;&nbsp; <a href="#">My Profile</a></i></li>
                            <li> <i class='bx bx-history' class="usermenu_item"></i>&nbsp;&nbsp; <a href="#">History</a></i></li>
                            <li> <i class='bx bx-cog' class="usermenu_item"></i>&nbsp;&nbsp; <a href="#">Settings</a></i></li>
                            <li id="signout"> <i class='bx bx-exit' class="usermenu_item"></i>&nbsp;&nbsp; <a href="#">Log-Out</a></i></li>
                        </ul>
                    </div>
                </div>

                <div class="loginButton">
                    <a href="login.html" class="login-btn">Login</a>
                </div>

                <div class="nav__toggle" id="nav-toggle">
                    <i class='bx bx-menu'></i>
                </div>

            </nav>
        </header>

        <main class="main">
            <!--==================== HOME ====================-->
            <section class="home" id="home">
                <img src="assets/img/hero2.jpg" alt="" class="home__img">

                <div class="home__container container grid">
                    <div class="home__data">
                        <h1 class="home__data-title"> Schedules </b></h1>
                    </div>
                </div>
            </section>

            <section class="testimonial section" id="testimonial">
              <h2 class="section__title">Search Your Destinations</h2>
          </section>

            <div class="container searchbx">
              <div class="table">
                  
                  <input type="text" id="search" onkeyup="filterTable()" placeholder="Search"><br>
                  
                  <table class="table table-bordered text-center" id="employee_table">
                      <tr>
                          <th>Bus Id</th>
                          <th>Train Id</th>
                          <th>Train_Name</th>
                          <th>Bus Name</th>
                          <th>Date</th>
                          <th>Time</th>
                          <th>No Of Seats</th>
                          <th>From</th>
                          <th>To</th>
                      </tr>
          
                  </table>
              </div>
              
            </div>
          
          <script>
              function filterTable() {
                  var input, filter, table, tr, td, i, j, txtValue;
                  input = document.getElementById("search");
                  filter = input.value.toUpperCase();
                  table = document.getElementById("employee_table");
                  tr = table.getElementsByTagName("tr");
          
                  for (i = 0; i < tr.length; i++) {
                      for (j = 0; j < tr[i].getElementsByTagName("td").length; j++) {
                          td = tr[i].getElementsByTagName("td")[j];
                          if (td) {
                              txtValue = td.textContent || td.innerText;
                              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                                  tr[i].style.display = "";
                                  break;
                              } else {
                                  tr[i].style.display = "none";
                              }
                          }
                      }
                  }
              }
          </script>

            

        <!--==================== FOOTER ====================-->
        <footer class="footer section">
            <div class="footer__container container grid">
                <div class="footer__content grid">
                    <div class="footer__data">
                        <h3 class="footer__title">Urbanway</h3>
                        <p class="footer__description">Wave goodbye to  <br> tedious ticket counters and 
                            embrace the future with <br> UrbanWay!
                        </p>  
                        <div>
                            <a href="https://www.facebook.com/" target="_blank" class="footer__social">
                                <i class='bx bxl-facebook-circle' ></i>
                            </a>
                            <a href="https://twitter.com/" target="_blank" class="footer__social">
                                <i class='bx bxl-twitter' ></i>
                            </a>
                            <a href="https://www.instagram.com/" target="_blank" class="footer__social">
                                <i class='bx bxl-instagram'></i>
                            </a>
                            <a href="https://www.youtube.com/" target="_blank" class="footer__social">
                                <i class='bx bxl-youtube' ></i>
                            </a>
                        </div>
                    </div>
    
                    <div class="footer__data">
                        <h3 class="footer__subtitle">About</h3>
                        <ul>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">About Us</a>
                            </li>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">Features</a>
                            </li>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">News & Blog</a>
                            </li>
                        </ul>
                    </div>
    
                    <div class="footer__data">
                        <h3 class="footer__subtitle">Company</h3>
                        <ul>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">Team</a>
                            </li>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">Plan Pricing</a>
                            </li>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">Become a member</a>
                            </li>
                        </ul>
                    </div>
    
                    <div class="footer__data">
                        <h3 class="footer__subtitle">Support</h3>
                        <ul>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">FAQs</a>
                            </li>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">Support Center</a>
                            </li>
                            <li class="footer__item">
                                <a href="oops.html" class="footer__link">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="footer__rights">
                    <b><p class="footer__copy">&#169; Team 5 - Sahan Tashiya Gihan Abishek Inura Layan. ICT 142-3 Group Project</p></b>
                    <div class="footer__terms">
                        <a href="oops.html" class="footer__terms-link">Terms of Service</a>
                        <a href="oops.html" class="footer__terms-link">Privacy Policy</a>
                    </div>
                </div>
            </div>
        </footer>

         <!--========== SCROLL UP ==========-->
        <a href="#" class="scrollup" id="scroll-up">
            <i class='bx bxs-chevron-up bx-fade-up scrollup__icon' ></i>
        </a>

        <!--=============== SCROLL REVEAL===============-->
        <script src="assets/js/scrollreveal.min.js"></script>

        <!--=============== MAIN JS ===============-->
        <script src="assets/js/main.js"></script>

        <script>
            function menuToggle(){
                const toggleMenu = document.querySelector('.menu');
                toggleMenu.classList.toggle('active')
            }
        </script>
  
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
            import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";
            import { 
                getAuth, 
                createUserWithEmailAndPassword, 
                signInWithEmailAndPassword,
                onAuthStateChanged,
                signOut
            } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
  
            // Your web app's Firebase configuration
            const firebaseConfig = {
            apiKey: "AIzaSyABwQpzIJhk5vkNbdC_FazG8FpMyVVfjrA",
            authDomain: "urbanway-e1936.firebaseapp.com",
            projectId: "urbanway-e1936",
            storageBucket: "urbanway-e1936.appspot.com",
            messagingSenderId: "957989416352",
            appId: "1:957989416352:web:7176885570c30084dc48c5"
            };
  
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);
            const auth = getAuth();
  
            const secretContent = document.querySelector(".action");
            const loginButton = document.querySelector(".login-btn");
  
            secretContent.style.display = "none";
  
            auth.onAuthStateChanged(function(user) {
                if(user) {
  
                    var email = user.email
  
                    var users = document.getElementById("user")
                    var text = document.createTextNode(email)
  
                    users.appendChild(text)
  
                    
                }
            })
  
            auth.onAuthStateChanged(function(user) {
                if (user) {
                    const email = user.email;
  
                    const username = email.split('@')[0];
  
                    const nameElement = document.getElementById('name');
                    if (nameElement) {
                        nameElement.innerText = username;
                    }
                }
            })
  
            const checkAuthState = async() => {
                auth.onAuthStateChanged(function(user) {
                    if(user) {
                        secretContent.style.display = "block";
                        loginButton.style.display = "none";
                    } else {
                        secretContent.style.display = "none";
                        loginButton.style.display = "block";
                    }
                })
            }
  
  
            let signOutButton = document.getElementById("signout")
  
            signOutButton.addEventListener("click", (e) => {
                e.preventDefault()
  
                auth.signOut()
                window.location = "index.html"
            })
            
            checkAuthState();
  
        </script>
    </body>
</html>